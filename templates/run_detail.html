{% extends "base.html" %}

{% block title %}Run Details - PyOrchestrator{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1><span class="text-muted">Run ID:</span> {{ run.id }}</h1>
    <div>
        <a href="/projects/{{ run.project_id }}" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Back to Project</a>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h2 class="h5 mb-0">Run Details</h2>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>Project ID:</strong> {{ run.project_id }}</p>
                <p><strong>Schedule ID:</strong> {{ run.schedule_id if run.schedule_id else 'Manual' }}</p>
            </div>
            <div class="col-md-6">
                <p><strong>Start Time:</strong> {{ run.start_time.strftime('%Y-%m-%d %H:%M:%S') }}</p>
                <p><strong>End Time:</strong> {{ run.end_time.strftime('%Y-%m-%d %H:%M:%S') if run.end_time else 'N/A' }}</p>
            </div>
        </div>
        <p><strong>Status:</strong> 
            {% if run.status == 'completed' %}
            <span class="badge bg-success">Completed</span>
            {% elif run.status == 'failed' %}
            <span class="badge bg-danger">Failed</span>
            {% elif run.status == 'running' %}
            <span class="badge bg-primary">Running</span>
            {% else %}
            <span class="badge bg-secondary">{{ run.status }}</span>
            {% endif %}
        </p>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h2 class="h5 mb-0">Log Output</h2>
    </div>
    <div class="card-body">
        <pre class="bg-dark text-white p-3 rounded"><code>{{ run.log_output if run.log_output else 'No log output' }}</code></pre>
    </div>
</div>
{% endblock %}